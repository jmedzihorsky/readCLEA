#	A function for reading the Constituency-Level Electons Archive 
#	fixed-width data files
#	Juraj Medzihorsky
#	2015-05-23
#
#	The input is the file name, the output a 52-column data.frame

readCLEA <-
    function(f)
    {
        x <- readLines(f, encoding='latin1')
        d <- data.frame(release=as.numeric(substr(x, 1, 1)), stringsAsFactors=FALSE)   
        rs <- function(s) gsub('^\\s+', '', gsub('\\s+$', '', s))
        wrap <- function(b, e) rs(substr(x, b, e))
        d$rg      <- wrap(  2,  15)
        d$ctr_n   <- wrap( 16,  45)
        d$ctr     <- wrap( 46,  49)
        d$yr      <- wrap( 50,  53)
        d$mn      <- wrap( 54,  57)
        d$sub     <- wrap( 58,  96)
        d$cst_n   <- wrap( 97, 178)
        d$cst     <- wrap(179, 182)
        d$mag     <- wrap(183, 186)
        d$pty_n   <- wrap(187, 328)
        d$pty     <- wrap(329, 333)
        d$can     <- wrap(334, 431)
        d$pev1    <- wrap(432, 439)
        d$vot1    <- wrap(440, 447)
        d$vv1     <- wrap(448, 455)
        d$ivv1    <- wrap(456, 462)
        d$to1     <- wrap(463, 481)
        d$cv1     <- wrap(482, 488)
        d$cvs1    <- wrap(489, 508)
        d$pv1     <- wrap(509, 524)
        d$pvs1    <- wrap(525, 544)
        d$pev2    <- wrap(545, 550)
        d$vot2    <- wrap(551, 556)
        d$vv2     <- wrap(557, 563)
        d$ivv2    <- wrap(564, 568)
        d$to2     <- wrap(569, 585)
        d$cv2     <- wrap(586, 590)
        d$cvs2    <- wrap(591, 609)
        d$pv2     <- wrap(610, 616)
        d$pvs2    <- wrap(617, 636)
        d$seat    <- wrap(637, 640)
        d$elec    <- wrap(641, 644)
        d$ev      <- wrap(645, 648)
        d$count2  <- wrap(649, 653)
        d$count3  <- wrap(654, 658)
        d$count4  <- wrap(659, 663)
        d$count5  <- wrap(664, 668)
        d$count6  <- wrap(669, 673)
        d$count7  <- wrap(674, 678)
        d$count8  <- wrap(679, 683)
        d$count9  <- wrap(684, 688)
        d$count10 <- wrap(689, 693)
        d$count11 <- wrap(694, 698)
        d$count12 <- wrap(699, 703)
        d$count13 <- wrap(704, 708)
        d$count14 <- wrap(709, 712)
        d$count15 <- wrap(713, 716)
        d$count16 <- wrap(717, 720)
        d$count17 <- wrap(721, 724)
        d$count18 <- wrap(725, 728)
        d$count19 <- wrap(729, 732)
        return(d)
    }
#	End    
